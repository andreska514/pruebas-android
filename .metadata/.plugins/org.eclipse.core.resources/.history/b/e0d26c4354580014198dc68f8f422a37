package com.andres.sun4all;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;


public class Descargar {
	Bitmap bitmap;
	URL url;
	String link;
	/** Constructor*/
	Bitmap Descargar(String link){
		try{
			this.link = link;
			url = new URL(link);
			InputStream in = url.openStream();
			BufferedOutputStream  out = new BufferedOutputStream
					(new FileOutputStream("testImage.png"));
			int i;
			while((i=in.read())!= -1){
				out.write(i);
			}
			out.close();
			in.close();
			
			BufferedInputStream buf = new BufferedInputStream(in);
			bitmap = BitmapFactory.decodeStream(buf);
			//image.setImageBitmap(bitmap);
			if (in != null) {
		        in.close();
	        }
	        if (buf != null) {
	        	buf.close();
	        }
		}catch (Exception e){
			Log.e("Error reading file", e.toString());
		}
		return bitmap;
	}
	
}
